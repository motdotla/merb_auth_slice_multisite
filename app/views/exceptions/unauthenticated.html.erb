<% @login_param = Merb::Authentication::Strategies::Multisite::Base.login_param %>
<% @password_param = Merb::Authentication::Strategies::Multisite::Base.password_param %>
<% @site_id_param = Merb::Authentication::Strategies::Multisite::Base.site_id_param %>
<% 
# make @current_site value. application.rb does not get call 
# because the authentication is protected at the rack level - which is better, 
# but it means I have to add the following duplicate line of code as far as I know.
@current_site = Site.first(:subdomain => request.first_subdomain)
%>
 
<div id="login_fields">
  <h3>
    Login
  </h3>
	<%= error_messages_for session.authentication %>
  <form action="/login" method="post" accept-charset="utf-8" id="login_form" name="login_form">
    <input type="hidden" name="site_id" value="58519132" id="site_id"> <input type="hidden" name="_method" value="PUT">
    <div class="formRow">
      <label>Login: <input type="text" name="login" value="" id="login"></label>
    </div>
    <div class="formRow">
      <label>Password:<input type="password" name="password" value="" id="password"></label>
    </div>
    <div class="formRow">
      <input type="submit" name="Submit" value="Log In" id="Submit">
    </div>
    <div class="formRow">
      <a href="#" id="forgot_password_link" name="forgot_password_link">Forgot password</a>
    </div>
  </form>
</div>
<div id="forgot_password_fields">
  <form action="/send_password" method="post" accept-charset="utf-8" id="send_password_form" name="send_password_form">
    <input type="hidden" name="site_id" value="58519132" id="site_id">
    <div class="formRow">
      <label for="login">Login: <input type="text" class="text" name="forgot_login" id="forgot_login"></label>
    </div>
    <div class="formRow">
      <input type="submit" name="Reset" value="Reset password" id="Reset">
    </div>
  </form>
</div>