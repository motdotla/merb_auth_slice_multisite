<div id="login">
	<h3>Login</h3>
	
  <%= error_messages_for session.authentication %>
  <% @login_param = Merb::Authentication::Strategies::Multisite::Base.login_param %>
  <% @password_param = Merb::Authentication::Strategies::Multisite::Base.password_param %>
	<% @site_id_param = Merb::Authentication::Strategies::Multisite::Base.site_id_param %>
	<% 
	# make @current_site value. application.rb does not get call 
	# because the authentication is protected at the rack level - which is better, 
	# but it means I have to add the following duplicate line of code as far as I know.
	@current_site = Site.first(:subdomain => request.first_subdomain)
	%>
  
	<form action="<%= slice_url(:merb_auth_slice_multisite, :perform_login) %>" method="POST" accept-charset="utf-8" id="login_form">
		<input type="hidden" name="<%= @site_id_param.to_s %>" value="<%= @current_site.id %>" id="<%= @site_id_param.to_s %>">
		<input type="hidden" name="_method" value="PUT" />
	  <div class="formRow">
	    <label><%= @login_param.to_s.capitalize %>: <input type="text" name="<%= @login_param.to_s %>" value="" id="<%= @login_param.to_s %>"></label>
	  </div> <!-- close: formRow -->
	  <div class="formRow">
	    <label><%= @password_param.to_s.capitalize %>:<input type="password" name="<%= @password_param.to_s %>" value="" id="<%= @password_param.to_s %>"></label>
	  </div> <!-- close: formRow -->
	  <div class="formRow">
	    <input type="submit" name="Submit" value="Log In" id="Submit">
	  </div> <!-- close: formRow -->
		<div class="formRow">
	    <a href="#" id="forgot_password_link">Forgot password</a>
	  </div> <!-- close: formRow -->
	</form>
</div>

<div id="forgot_password">
	<form action="/send_password" method="post" accept-charset="utf-8" id="send_password_form">
		<input type="hidden" name="<%= @site_id_param.to_s %>" value="<%= @current_site.id %>" id="<%= @site_id_param.to_s %>">
		<div class="formRow">
	    <label for="<%= @login_param.to_s %>"><%= @login_param.to_s.capitalize %>: <input type="text" class="text" name="<%= @login_param.to_s %>" id="<%= @login_param.to_s %>" /></label>
	  </div> <!-- close: formRow -->
		<div class="formRow">
			<input type="submit" name="Reset" value="Reset password" id="Reset" />
	  </div> <!-- close: formRow -->
	</form>
</div>